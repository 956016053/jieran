@charset "UTF-8";

/* ============================================================
   ğŸ¨ é¢˜åº“å¤‡è€ƒç³»ç»Ÿ - V16.0 ç»ˆæåˆå¹¶ç‰ˆ
   åŒ…å«ï¼šé¦–é¡µæŠ½å¡(3D)ã€é¢˜åº“åˆ·é¢˜(æ•´é½åˆ—è¡¨)ã€æ‘„åƒå¤´ã€é˜²ä¹±ç 
   ============================================================ */

/* --- 1. å…¨å±€åŸºç¡€ --- */
html { height: 100%; width: 100%; overflow-x: hidden; }

body {
    /* ä¼˜å…ˆä½¿ç”¨ä¸­æ–‡å­—ä½“ï¼Œè§£å†³ä¹±ç  */
    font-family: "Microsoft YaHei", "PingFang SC", "Segoe UI", sans-serif;
    background-color: #1a1a2e;
    background-image: radial-gradient(circle at 50% 30%, #2a2a4a 0%, #1a1a2e 100%);
    background-attachment: fixed;
    background-size: cover;
    color: #f0f0f0;
    margin: 0; padding: 20px;
    display: flex; flex-direction: column; align-items: center;
    min-height: 100%; position: relative;
}

/* å¼ºåˆ¶å›¾æ ‡å­—ä½“ */
.fas, .fab, .far, .fa { font-family: "Font Awesome 6 Free" !important; font-weight: 900; }

#tsparticles { position: absolute; width: 100%; height: 100%; top: 0; left: 0; z-index: -1; pointer-events: none; }
button { font-family: inherit; outline: none; -webkit-tap-highlight-color: transparent; }

/* --- 2. é¦–é¡µ Header & XPæ¡ --- */
header {
    width: 100%; max-width: 800px;
    background: rgba(255,255,255,0.03); backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.1);
    padding: 15px; border-radius: 15px; margin-bottom: 20px;
    display: flex; gap: 15px; align-items: center;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
}
.xp-bar-bg { width: 100%; height: 8px; background: #333; border-radius: 4px; overflow: hidden; margin: 5px 0; }
.xp-bar-fill { height: 100%; width: 0%; background: linear-gradient(90deg, #4facfe, #00f2fe); transition: width 0.5s; }
.stats-text { font-size: 0.8rem; color: #aaa; margin-top: 5px; }

/* --- 3. é¦–é¡µ 3D å¡ç‰Œ (Gacha Mode) --- */

/* å¼ºåˆ¶ Flex å¸ƒå±€ï¼Œä¿è¯æ¨ªå‘æ’åˆ— */

.card-grid {
    display: flex !important;
    flex-wrap: wrap !important;     /* å¿…é¡»æ¢è¡Œ */
    justify-content: center;        /* å±…ä¸­ */
    gap: 25px;                      /* ç´§å‡‘é—´è· */
    width: 98vw !important;         /* ğŸ”¥ å æ»¡ 98% å±å¹•å®½åº¦ */
    max-width: 100% !important;     /* ğŸ”¥ è§£é™¤ 1200px çš„é™åˆ¶ */
    margin: 0 auto;
    padding: 20px 10px;
}

/* --- ä¿®æ”¹å¡ç‰Œå®½åº¦ï¼Œç¡®ä¿ä¸€è¡Œèƒ½æ”¾æ›´å¤šä¸ª --- */
.card-wrapper {
    width: 210px;                   /* ç¨å¾®ç¼©å°å®½åº¦ä»¥å®¹çº³æ›´å¤šåˆ— */
    height: 330px;
    perspective: 1000px;
    cursor: pointer;
}

/* --- å¼ºåˆ¶èƒŒé¢èƒŒæ™¯ä¸é€æ˜ --- */
.face-back {
    background: #162032 !important; /* ç¡®ä¿ç¿»è½¬åèƒŒæ™¯æ˜¯æ·±è‰²çš„ï¼Œä¸æ˜¯é€æ˜çš„ */
    border: 1px solid rgba(255,255,255,0.2);
}

/* ç¿»è½¬æ ¸å¿ƒ */
.card-inner {
    width: 100%; height: 100%;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
}
.card-wrapper.flipped .card-inner { transform: rotateY(180deg); }

/* å¡ç‰Œå…¬å…±é¢ */
.card-face {
    position: absolute; width: 100%; height: 100%;
    backface-visibility: hidden; /* èƒŒé¢ä¸å¯è§ */
    border-radius: 16px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    border: 1px solid rgba(255,255,255,0.15);
    display: flex; flex-direction: column; 
    overflow: hidden; padding: 20px; box-sizing: border-box;
    /* ç»Ÿä¸€çº¹ç† */
    background-image: radial-gradient(circle at 10% 10%, rgba(255,255,255,0.05) 0%, transparent 20%);
}

/* æ­£é¢æ ·å¼ */
.face-front {
    background-color: #1e2b4a; /* æ·±è“åº• */
    align-items: center; text-align: center;
    z-index: 2;
}

/* èƒŒé¢æ ·å¼ */
.face-back {
    background-color: #162032; /* æ·±ç°åº• */
    transform: rotateY(180deg);
    justify-content: space-between;
    z-index: 1;
}

/* ç¨€æœ‰åº¦å‘å…‰è¾¹æ¡† */
/* UR é‡‘å¡å‘¼å¸ç‰¹æ•ˆ */
.card-wrapper.rarity-UR .face-front { 
    border: 2px solid #ffd700; 
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
    animation: pulseGold 2s infinite; /* å¢åŠ åŠ¨æ€å‘¼å¸ */
}
@keyframes pulseGold {
    0% { box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); }
    50% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.9); }
    100% { box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); }
}
.card-wrapper.rarity-SSR .face-front { border: 2px solid #ff0080; box-shadow: 0 0 25px rgba(255, 0, 128, 0.3); }
.card-wrapper.rarity-SR .face-front { border: 2px solid #00bfff; box-shadow: 0 0 25px rgba(0, 191, 255, 0.3); }
.card-wrapper.rarity-R .face-front { border: 1px solid #666; box-shadow: none; }

/* å¡ç‰Œå†…éƒ¨å†…å®¹ */
.card-icon { 
    font-size: 4rem; margin: 30px 0; opacity: 0.95; 
    filter: drop-shadow(0 0 10px rgba(255,255,255,0.2)); 
    transition: transform 0.3s;
}
.card-wrapper:hover .card-icon { transform: scale(1.1); }

.card-title { font-size: 1.1rem; font-weight: bold; color: #fff; margin-bottom: 10px; line-height: 1.4; }
.rarity-badge { font-size: 0.8rem; font-weight: 800; letter-spacing: 2px; margin-bottom: 5px; text-transform: uppercase; }

/* ğŸ”¥ â€œä¼š/ä¸ä¼šâ€ æŒ‰é’®æ ·å¼ */
.card-actions {
    display: flex; gap: 10px; margin-top: 15px;
}
.btn-action {
    flex: 1; padding: 10px 0; border-radius: 8px; border: none;
    font-size: 0.9rem; font-weight: bold; cursor: pointer; color: #fff;
    transition: 0.2s;
    font-family: "Microsoft YaHei", sans-serif; /* é˜²æ­¢æŒ‰é’®ä¹±ç  */
}
/* ç»¿è‰² - ä¼šäº† */
.btn-know { background: linear-gradient(135deg, #2ecc71, #27ae60); box-shadow: 0 4px 10px rgba(46, 204, 113, 0.3); }
.btn-know:hover { transform: translateY(-2px); filter: brightness(1.1); }

/* çº¢è‰² - ä¸ä¼š */
.btn-forget { background: linear-gradient(135deg, #e74c3c, #c0392b); box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3); }
.btn-forget:hover { transform: translateY(-2px); filter: brightness(1.1); }

/* --- 4. æŠ½å¡æŒ‰é’®ç»„ --- */
.action-area { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-bottom: 20px; }
.btn-draw {
    padding: 10px 20px; border: none; border-radius: 50px;
    font-size: 1rem; font-weight: bold; margin: 5px; color: white; cursor: pointer;
    transition: transform 0.1s, box-shadow 0.1s;
    display: inline-flex; align-items: center; gap: 8px;
    font-family: "Microsoft YaHei", sans-serif;
}
.btn-draw:hover { transform: translateY(-3px); filter: brightness(1.1); }
.btn-draw:active { transform: translateY(2px); }

.blue-btn { background: linear-gradient(135deg, #4facfe, #00f2fe); box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4); }
.purple-btn { background: linear-gradient(135deg, #b721ff, #21d4fd); box-shadow: 0 5px 15px rgba(183, 33, 255, 0.4); }
.gold-btn { background: linear-gradient(135deg, #f09819, #edde5d); color: #5a4a00; box-shadow: 0 5px 15px rgba(240, 152, 25, 0.4); }
.ghost-btn { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); }

/* --- 5. æ‘„åƒå¤´ (ä¿®å¤) --- */
/* --- åœ¨ css/app.css ä¸­æ‰¾åˆ°æˆ–æ·»åŠ è¿™å— --- */

#draggableCamera {
    /* å¿…é¡»æ˜¯ fixedï¼Œå¦åˆ™ JS æ‹–ä¸åŠ¨ */
    position: fixed; 
    bottom: 20px; 
    right: 20px; 
    width: 220px;
    
    /* ğŸ”¥ å…³é”®ï¼šå±‚çº§å¿…é¡»æé«˜ï¼Œå¦åˆ™ä¼šè¢«èƒŒæ™¯ç‰¹æ•ˆæŒ¡ä½å¯¼è‡´ç‚¹ä¸äº† */
    z-index: 100000 !important; 
    
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 12px;
    
    /* é¼ æ ‡æ”¾ä¸Šå»æ˜¾ç¤ºå¯æ‹–åŠ¨ */
    cursor: move; 
    
    /* é˜²æ­¢è¢«è¯¯è§¦é€‰ä¸­æ–‡å­— */
    user-select: none;
}
.btn-cam {
    width: 100%; background: rgba(255,255,255,0.1); border: none; color: #fff;
    padding: 10px; cursor: pointer; border-bottom: 1px solid rgba(255,255,255,0.1);
    font-family: "Microsoft YaHei", sans-serif;
}
.video-overlay { width: 100%; height: 150px; position: relative; background: #000; }
.video-overlay video, .video-overlay canvas {
    width: 100%; height: 100%; object-fit: cover;
    transform: scaleX(-1); /* è§†é¢‘ç¿»è½¬ */
    position: absolute; top: 0; left: 0;
}
/* æ–‡å­—æç¤ºä¸ç¿»è½¬ */
.gesture-hint {
    position: absolute; bottom: 0; left: 0; width: 100%; padding: 5px;
    background: rgba(0,0,0,0.7); color: #00f2fe; font-size: 0.8rem; text-align: center;
    pointer-events: none; transform: none !important;
}

/* --- 6. é¢˜åº“é¡µ (Review Mode) - å®Œæ•´æ ·å¼ --- */
.review-container {
    width: 100%; max-width: 1200px; margin: 0 auto; padding: 20px; padding-bottom: 80px;
}

.review-header {
    display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 20px;
    margin-bottom: 40px; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px);
    padding: 15px 30px; border-radius: 50px; border: 1px solid rgba(255, 255, 255, 0.1);
}

.filter-btn {
    background: transparent; border: 1px solid rgba(255,255,255,0.2); color: #aaa;
    padding: 8px 24px; border-radius: 50px; cursor: pointer; transition: all 0.3s;
    font-family: "Microsoft YaHei", sans-serif;
}
.filter-btn.active, .filter-btn:hover {
    background: linear-gradient(45deg, #4facfe, #00f2fe); border-color: transparent; color: #1a1a2e;
}

/* é¢˜åº“åˆ—è¡¨ Grid å¸ƒå±€ */
.question-grid {
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 30px; 
    align-items: start; 
    padding: 10px; 
    width: 100%;
}

/* é¢˜åº“å¡ç‰‡æ ·å¼ */
.q-card {
    background: linear-gradient(145deg, rgba(30, 43, 74, 0.8), rgba(22, 33, 62, 0.9));
    backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1);
    border-radius: 16px; padding: 25px; position: relative; overflow: hidden;
    display: flex; flex-direction: column; justify-content: flex-start;
    min-height: 250px; transition: transform 0.3s;
}
.q-card:hover { transform: translateY(-5px); border-color: rgba(255,255,255,0.3); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }

/* é¢˜å‹è£…é¥°æ¡ */
.q-card::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: #666; }
.q-card.type-choice::before { background: #ff0080; box-shadow: 2px 0 15px #ff0080; }
.q-card.type-fill::before { background: #4facfe; box-shadow: 2px 0 15px #4facfe; }
.q-card.type-qa::before { background: #ffd700; box-shadow: 2px 0 15px #ffd700; }

.q-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; }
.q-badge { font-size: 0.75rem; padding: 4px 8px; border-radius: 6px; font-weight: bold; background: rgba(255,255,255,0.1); }
.q-id { font-family: monospace; color: #888; }
.q-title { font-size: 1.15rem; color: #fff; margin-bottom: 20px; line-height: 1.5; font-weight: 600; }
.q-input-area { margin-top: auto; display: flex; flex-direction: column; gap: 12px; }

/* è¾“å…¥æ¡† */
.q-input {
    width: 100%; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1);
    color: #fff; padding: 12px; border-radius: 8px; font-size: 0.9rem;
}
.q-input:focus { border-color: #4facfe; outline: none; background: rgba(0,0,0,0.5); }

/* é€‰é¡¹æ ·å¼ */
.opt-item {
    padding: 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px; cursor: pointer; transition: 0.2s; display: flex; align-items: center;
}
.opt-item:hover { background: rgba(79, 172, 254, 0.15); border-color: #4facfe; }
.opt-item.selected { background: linear-gradient(90deg, rgba(79, 172, 254, 0.25), rgba(0, 242, 254, 0.1)); border-color: #00f2fe; }
.opt-key { color: #4facfe; font-weight: bold; margin-right: 10px; font-family: monospace; }

/* è§£ææŒ‰é’® */
.btn-analysis {
    width: 100%; padding: 10px; background: rgba(0,0,0,0.2); border: 1px dashed rgba(255,255,255,0.2);
    color: #aaa; border-radius: 8px; cursor: pointer; margin-top: 10px;
}
.btn-analysis:hover { color: #fff; border-color: #fff; }
.analysis-box { margin-top: 15px; padding: 15px; background: rgba(0,0,0,0.5); border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); }
.correct-ans { color: #2ecc71; font-weight: bold; margin-bottom: 5px; }

/* åˆ†é¡µ */
.pagination { display: flex; justify-content: center; gap: 15px; margin-top: 40px; align-items: center; }
.page-btn { background: #1e2b4a; border: 1px solid rgba(255,255,255,0.2); color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; }
.page-btn:hover:not(:disabled) { background: #4facfe; border-color: #4facfe; }
.page-btn:disabled { opacity: 0.5; }

/* --- 7. æ‰“èµæŒ‰é’® --- */
.donate-fab-container { position: fixed; left: 30px; bottom: 30px; z-index: 9990; }
.donate-fab {
    width: 60px; height: 60px; border-radius: 50%;
    background: linear-gradient(135deg, #FFD700, #FFA500);
    border: none; color: #fff; font-size: 24px; cursor: pointer;
    box-shadow: 0 8px 20px rgba(255, 215, 0, 0.4);
    display: flex; justify-content: center; align-items: center; transition: transform 0.3s;
}
.donate-fab:hover { transform: scale(1.1) rotate(15deg); }
.donate-card {
    position: absolute; bottom: 80px; left: 0; width: 260px;
    background: rgba(30, 43, 74, 0.95); backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 16px; padding: 20px;
    opacity: 0; visibility: hidden; transform: translateY(20px); transition: 0.3s; pointer-events: none;
}
.donate-fab-container:hover .donate-card { opacity: 1; visibility: visible; transform: translateY(0); pointer-events: auto; }
.qr-codes { display: flex; justify-content: space-between; gap: 10px; margin-top: 10px; }
.qr-item img { width: 100px; height: 100px; border-radius: 8px; background: #fff; }

/* åŠ¨ç”» */
@keyframes cardFlyIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
.q-card.animate-in, .new-card { animation: cardFlyIn 0.5s backwards; }

/* --- è¿½åŠ åˆ° css/app.css æœ«å°¾ --- */

/* ğŸ”¥ ä¿®å¤å¡å†Œä¸ºå®½å±å¤šåˆ—å±•ç¤º (è°ƒæ•´äº†æœ€å°å®½åº¦ä¸º 120pxï¼Œä¿è¯èƒ½æ’å¾ˆå¤šåˆ—) */
#albumGrid {
    display: grid !important;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)) !important; 
    gap: 15px;
    padding: 20px;
    width: 100%;
    box-sizing: border-box;
}

.album-item {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 10px;
    text-align: center;
    color: #fff;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 70px;
    font-size: 0.85rem;
}

.album-item:hover {
    background: rgba(79, 172, 254, 0.2);
    transform: translateY(-3px);
    border-color: #00d2ff;
}